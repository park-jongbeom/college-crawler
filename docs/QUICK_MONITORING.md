# âš¡ ë¹ ë¥¸ ëª¨ë‹ˆí„°ë§ ê°€ì´ë“œ

ìš´ì˜ ì„œë²„ì—ì„œ College Crawlerê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ **3ë¶„ ì•ˆì—** í™•ì¸í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

## ğŸš€ ê°€ì¥ ë¹ ë¥¸ í™•ì¸ ë°©ë²•

### 1ë‹¨ê³„: ì¢…í•© ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```bash
cd /media/ubuntu/data120g/college-crawler
./scripts/monitor.sh
```

ì´ ëª…ë ¹ í•˜ë‚˜ë¡œ ë‹¤ìŒ í•­ëª©ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- âœ… ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ìƒíƒœ
- âœ… í—¬ìŠ¤ì²´í¬ ìƒíƒœ  
- âœ… CPU/ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- âœ… ìµœê·¼ ì—ëŸ¬ ë¡œê·¸
- âœ… í¬ë¡¤ë§ ê²°ê³¼ ê°œìˆ˜
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
- âœ… ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰

**ì˜ˆìƒ ì¶œë ¥:**
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ” College Crawler ìš´ì˜ ìƒíƒœ í™•ì¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ ì»¨í…Œì´ë„ˆ ìƒíƒœ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
NAMES              STATUS              RUNNING FOR
college-crawler    Up 2 hours          2 hours ago

2ï¸âƒ£ í—¬ìŠ¤ì²´í¬
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ìƒíƒœ: ì •ìƒ

3ï¸âƒ£ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
NAME               CPU %     MEM USAGE
college-crawler    2.45%     245MiB / 1GiB

4ï¸âƒ£ ìµœê·¼ ì—ëŸ¬ ë¡œê·¸ (5ì¤„)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ìµœê·¼ ì—ëŸ¬ ì—†ìŒ

5ï¸âƒ£ í¬ë¡¤ë§ ê²°ê³¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ ì €ì¥ëœ í¬ë¡¤ë§ ê²°ê³¼: 25ê°œ

6ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ì „ì²´ í•™êµ ìˆ˜: 60ê°œ
   ìœ í•™ìƒ ë‹´ë‹¹ì ì •ë³´ê°€ ìˆëŠ” í•™êµ: 25ê°œ

7ï¸âƒ£ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ë¡œê·¸ ë³¼ë¥¨: 124M
ğŸ“Š ë°ì´í„° ë³¼ë¥¨: 3.2M

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ëª¨ë‹ˆí„°ë§ ì™„ë£Œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ” ìƒì„¸ í™•ì¸ ë°©ë²•

### 1. ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§

```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸ (Ctrl+Cë¡œ ì¢…ë£Œ)
docker compose logs -f college-crawler

# ìµœê·¼ 50ì¤„ë§Œ
docker compose logs --tail=50 college-crawler

# ìµœê·¼ 1ì‹œê°„ ë¡œê·¸
docker compose logs --since 1h college-crawler
```

### 2. í—¬ìŠ¤ì²´í¬

```bash
./scripts/health_monitor.sh
```

**ì˜ˆìƒ ì¶œë ¥:**
```
ğŸ¥ College Crawler í—¬ìŠ¤ì²´í¬ ëª¨ë‹ˆí„°ë§
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ ì»¨í…Œì´ë„ˆ ìƒíƒœ: running
2ï¸âƒ£ í—¬ìŠ¤ì²´í¬: healthy
3ï¸âƒ£ Python ì‹¤í–‰ í…ŒìŠ¤íŠ¸
   âœ… Python 3.11.9
4ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
   âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ
5ï¸âƒ£ í¬ë¡¤ëŸ¬ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
   âœ… í¬ë¡¤ëŸ¬ ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ
6ï¸âƒ£ í™˜ê²½ë³€ìˆ˜ í™•ì¸
   âœ… í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ì„¤ì •ë¨

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… í—¬ìŠ¤ì²´í¬ ì™„ë£Œ: ëª¨ë“  í•­ëª© ì •ìƒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸

```bash
# DB ìƒíƒœ ì²´í¬
docker exec college-crawler python scripts/check_db.py
```

**ì˜ˆìƒ ì¶œë ¥:**
```
=== ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸ ===
1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸...
   âœ… ì—°ê²° ì„±ê³µ

2. í•™êµ ë°ì´í„° í™•ì¸...
   ì „ì²´ í•™êµ ìˆ˜: 60ê°œ
   ìº˜ë¦¬í¬ë‹ˆì•„ (CA): 45ê°œ
   í…ì‚¬ìŠ¤ (TX): 5ê°œ

3. ìµœê·¼ ë“±ë¡ í•™êµ (ìµœëŒ€ 10ê°œ):
   1. Los Angeles Trade-Technical College (CA)
      ğŸ“§ international@lattc.edu
      ğŸ“ (213) 763-7000
   2. Santa Monica College (CA)
      ğŸ“§ admission@smc.edu
   ...

4. ìœ í•™ìƒ ë‹´ë‹¹ì ì •ë³´ê°€ ìˆëŠ” í•™êµ: 25ê°œ

=== í™•ì¸ ì™„ë£Œ ===
```

---

## ğŸš¨ ë¬¸ì œ ë°œìƒ ì‹œ ì¦‰ì‹œ í™•ì¸

### ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°

```bash
# 1. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker ps -a | grep college-crawler

# 2. ìµœê·¼ ë¡œê·¸ í™•ì¸
docker compose logs --tail=100 college-crawler

# 3. ì¬ì‹œì‘
docker compose restart college-crawler
```

### ì—ëŸ¬ ë¡œê·¸ í™•ì¸

```bash
# ì—ëŸ¬ë§Œ í•„í„°ë§
docker compose logs college-crawler | grep -i error

# ìµœê·¼ ì—ëŸ¬ 5ê°œ
docker compose logs college-crawler | grep -i error | tail -5

# íŠ¹ì • ë‚ ì§œì˜ ì—ëŸ¬
docker compose logs --since "2026-02-10T00:00:00" college-crawler | grep -i error
```

### ë©”ëª¨ë¦¬ ì´ìŠˆ

```bash
# ì‹¤ì‹œê°„ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§
docker stats college-crawler

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker compose restart college-crawler
```

---

## ğŸ“Š í¬ë¡¤ë§ ì§„í–‰ ìƒí™© í™•ì¸

### ë°©ë²• 1: ë¡œê·¸ë¡œ í™•ì¸

```bash
# í¬ë¡¤ë§ ì„±ê³µ ë¡œê·¸
docker compose logs college-crawler | grep "âœ… ì„±ê³µ"

# í¬ë¡¤ë§ ì‹¤íŒ¨ ë¡œê·¸
docker compose logs college-crawler | grep "âŒ ì‹¤íŒ¨"

# í†µê³„
echo "ì„±ê³µ: $(docker compose logs college-crawler | grep -c 'âœ…')"
echo "ì‹¤íŒ¨: $(docker compose logs college-crawler | grep -c 'âŒ')"
```

### ë°©ë²• 2: íŒŒì¼ë¡œ í™•ì¸

```bash
# í¬ë¡¤ë§ ì™„ë£Œëœ í•™êµ ìˆ˜
docker exec college-crawler find /app/data/crawled -name "*.json" | wc -l

# íŒŒì¼ ëª©ë¡
docker exec college-crawler ls -lh /app/data/crawled/

# íŠ¹ì • í•™êµ ê²°ê³¼ ë³´ê¸°
docker exec college-crawler cat /app/data/crawled/school_name.json | jq '.'
```

### ë°©ë²• 3: ë°ì´í„°ë² ì´ìŠ¤ë¡œ í™•ì¸

```bash
# ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ë°ì´í„° í™•ì¸
docker exec college-crawler python scripts/check_db.py

# ë˜ëŠ” ì§ì ‘ SQL ì‹¤í–‰
docker exec college-crawler python -c "
from src.database.connection import get_db
from src.database.models import School

with get_db() as db:
    total = db.query(School).count()
    with_email = db.query(School).filter(School.international_email != None).count()
    print(f'ì „ì²´ í•™êµ: {total}')
    print(f'ì´ë©”ì¼ ìˆëŠ” í•™êµ: {with_email}')
"
```

---

## ğŸ”” ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ (ë°±ê·¸ë¼ìš´ë“œ)

ì—ëŸ¬ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì‹œí•˜ê³  ì‹¶ë‹¤ë©´:

```bash
# ì—ëŸ¬ ê°ì‹œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (30ì´ˆë§ˆë‹¤ ì²´í¬)
./scripts/watch_errors.sh

# ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰
nohup ./scripts/watch_errors.sh > /tmp/error_watch.log 2>&1 &

# í”„ë¡œì„¸ìŠ¤ í™•ì¸
ps aux | grep watch_errors

# ì¢…ë£Œ
pkill -f watch_errors.sh
```

---

## ğŸ“± ì£¼ìš” ëª…ë ¹ì–´ ì¹˜íŠ¸ì‹œíŠ¸

| ëª©ì  | ëª…ë ¹ì–´ |
|------|--------|
| ì¢…í•© ëª¨ë‹ˆí„°ë§ | `./scripts/monitor.sh` |
| í—¬ìŠ¤ì²´í¬ | `./scripts/health_monitor.sh` |
| ì‹¤ì‹œê°„ ë¡œê·¸ | `docker compose logs -f college-crawler` |
| ì»¨í…Œì´ë„ˆ ìƒíƒœ | `docker ps \| grep college-crawler` |
| ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ | `docker stats college-crawler` |
| DB í™•ì¸ | `docker exec college-crawler python scripts/check_db.py` |
| ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ | `docker compose restart college-crawler` |
| ì—ëŸ¬ ë¡œê·¸ | `docker compose logs college-crawler \| grep -i error` |

---

## ğŸ’¡ ìë™í™” íŒ

### Cronìœ¼ë¡œ ì •ê¸° ëª¨ë‹ˆí„°ë§

```bash
# crontab í¸ì§‘
crontab -e

# ë§¤ 5ë¶„ë§ˆë‹¤ í—¬ìŠ¤ì²´í¬ (ë¡œê·¸ ì €ì¥)
*/5 * * * * cd /media/ubuntu/data120g/college-crawler && ./scripts/health_monitor.sh >> /tmp/health_check.log 2>&1

# ë§¤ì¼ ì˜¤ì „ 9ì‹œ ì¢…í•© ëª¨ë‹ˆí„°ë§
0 9 * * * cd /media/ubuntu/data120g/college-crawler && ./scripts/monitor.sh | mail -s "College Crawler ì¼ì¼ ë¦¬í¬íŠ¸" your@email.com
```

### Systemd ì„œë¹„ìŠ¤ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

```bash
# /etc/systemd/system/crawler-monitor.service
[Unit]
Description=College Crawler Error Monitor
After=docker.service

[Service]
Type=simple
ExecStart=/media/ubuntu/data120g/college-crawler/scripts/watch_errors.sh
Restart=always
User=patrick

[Install]
WantedBy=multi-user.target
```

```bash
# ì„œë¹„ìŠ¤ ë“±ë¡ ë° ì‹œì‘
sudo systemctl daemon-reload
sudo systemctl enable crawler-monitor
sudo systemctl start crawler-monitor

# ìƒíƒœ í™•ì¸
sudo systemctl status crawler-monitor
```

---

## ğŸ¯ ì¼ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë§¤ì¼ ë‹¤ìŒ í•­ëª©ë“¤ì„ í™•ì¸í•˜ì„¸ìš”:

- [ ] ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ìƒíƒœ (`docker ps`)
- [ ] í—¬ìŠ¤ì²´í¬ ì •ìƒ ì—¬ë¶€ (`./scripts/health_monitor.sh`)
- [ ] ì—ëŸ¬ ë¡œê·¸ ì—†ìŒ (`docker compose logs | grep -i error`)
- [ ] í¬ë¡¤ë§ ì§„í–‰ ìƒí™© (ë¡œê·¸ ë˜ëŠ” DB)
- [ ] ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ (`df -h`)
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (`docker stats`)

**ì†Œìš” ì‹œê°„**: ì•½ 2-3ë¶„

---

## ğŸ“š ë” ì•Œì•„ë³´ê¸°

ìƒì„¸í•œ ëª¨ë‹ˆí„°ë§ ê°€ì´ë“œëŠ” [PRODUCTION_MONITORING.md](./PRODUCTION_MONITORING.md)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-10
