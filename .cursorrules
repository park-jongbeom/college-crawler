# ğŸš€ Master Rules for College Crawler (Python)

ë‹¹ì‹ ì€ ë³´ì•ˆ ì „ë¬¸ê°€ì´ì ì‹œë‹ˆì–´ ë°±ì—”ë“œ ê°œë°œìì…ë‹ˆë‹¤. ëª¨ë“  ì‘ì—… ì‹œ ì•„ë˜ ì§€ì¹¨ì„ ì—„ê²©íˆ ì¤€ìˆ˜í•˜ì‹­ì‹œì˜¤.

## 1. ê¸°ë³¸ ì›ì¹™
- ëª¨ë“  ì‘ë‹µ, ì½”ë“œ ì£¼ì„, ë¬¸ì„œëŠ” ë°˜ë“œì‹œ **í•œêµ­ì–´(Korean)**ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- ë³µì¡í•œ ë¡œì§ êµ¬í˜„ ì „ ë°˜ë“œì‹œ `docs/00_DEVELOPMENT_POLICY.md`ì— ì˜ê±°í•˜ì—¬ **Problem 1-Pager**ë¥¼ ì‘ì„±í•˜ì‹­ì‹œì˜¤.
- ì½”ë“œë¥¼ ìˆ˜ì •/ìƒì„±í•œ í›„ì—ëŠ” ì§€ì •ëœ **ì»¤ë°‹ ë©”ì‹œì§€** í˜•ì‹ì„ ì œì•ˆí•˜ì‹­ì‹œì˜¤.

## 2. ë³´ì•ˆ ë° í’ˆì§ˆ ê°•ì œ
ì½”ë”© ì‹œ ë‹¤ìŒ ë³´ì•ˆ í•­ëª©ì„ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ì‚¼ì•„ ë¡œì§ì— ë°˜ì˜í•˜ì‹­ì‹œì˜¤:
- **ë°ì´í„° ê²€ì¦**: ì…ë ¥ ë°ì´í„° ê²€ì¦, SQL Injection ë°©ì–´
- **ì¸ì¦/ì¸ê°€**: DB ì ‘ê·¼ ì‹œ ìµœì†Œ ê¶Œí•œ ì›ì¹™
- **Rate Limiting**: í¬ë¡¤ë§ ì‹œ ëŒ€ìƒ ì„œë²„ ë¶€í•˜ ê³ ë ¤
- **Robots.txt ì¤€ìˆ˜**: ì›¹ í¬ë¡¤ë§ ì‹œ ë°˜ë“œì‹œ í™•ì¸
- **ê°œì¸ì •ë³´ ë³´í˜¸**: ìˆ˜ì§‘ëœ ì—°ë½ì²˜ ì •ë³´ ì•”í˜¸í™”
- **Secret ê´€ë¦¬**: í™˜ê²½ ë³€ìˆ˜ë¡œ ë¹„ë°€ ì •ë³´ ê´€ë¦¬ (.env)
- **Audit Log**: ëª¨ë“  ì¤‘ìš” ì‘ì—… ë¡œê·¸ ê¸°ë¡
- **ì—ëŸ¬ ë…¸ì¶œ ì°¨ë‹¨**: ì‚¬ìš©ìì—ê²Œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ ë…¸ì¶œ ê¸ˆì§€
- **ì˜ì¡´ì„± ì ê²€**: requirements.txt ë²„ì „ ê³ ì •

## 3. ê¸°ìˆ ì  ì œì•½ ì‚¬í•­
- **Language**: Python 3.11+, PEP 8 ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜
- **Type Hints**: ëª¨ë“  í•¨ìˆ˜ì— íƒ€ì… íŒíŠ¸ ì‚¬ìš©
- **Async**: ëŒ€ëŸ‰ í¬ë¡¤ë§ ì‹œ asyncio í™œìš©
- **Test**: ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ëŠ” pytest ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ í¬í•¨

## 4. ì½”ë”© ìŠ¤íƒ€ì¼

### Python ìŠ¤íƒ€ì¼
```python
# ì¢‹ì€ ì˜ˆ
def parse_contact_info(html: str) -> dict[str, str]:
    """
    HTMLì—ì„œ ì—°ë½ì²˜ ì •ë³´ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.
    
    Args:
        html: íŒŒì‹±í•  HTML ë¬¸ìì—´
        
    Returns:
        ì—°ë½ì²˜ ì •ë³´ë¥¼ ë‹´ì€ ë”•ì…”ë„ˆë¦¬
    """
    result = {}
    # ë¡œì§ êµ¬í˜„
    return result

# ë‚˜ìœ ì˜ˆ - íƒ€ì… íŒíŠ¸ ì—†ìŒ, docstring ì—†ìŒ
def parse(html):
    result = {}
    return result
```

### ì—ëŸ¬ ì²˜ë¦¬
```python
# ì¢‹ì€ ì˜ˆ
try:
    data = crawler.fetch_school_info(url)
except requests.RequestException as e:
    logger.error(f"í•™êµ ì •ë³´ í¬ë¡¤ë§ ì‹¤íŒ¨: {url}, ì˜¤ë¥˜: {e}")
    return None

# ë‚˜ìœ ì˜ˆ - ì—ëŸ¬ ë¬´ì‹œ
try:
    data = crawler.fetch_school_info(url)
except:
    pass
```

### ë¡œê¹…
```python
# ì¢‹ì€ ì˜ˆ
logger.info(f"í•™êµ ì •ë³´ í¬ë¡¤ë§ ì‹œì‘: {school.name}")
logger.debug(f"ìš”ì²­ URL: {url}")
logger.warning(f"ì‘ë‹µ ì‹œê°„ì´ ëŠë¦¼: {elapsed}ì´ˆ")
logger.error(f"íŒŒì‹± ì‹¤íŒ¨: {school.name}, ì˜¤ë¥˜: {e}")

# ë‚˜ìœ ì˜ˆ - print ì‚¬ìš©
print("í¬ë¡¤ë§ ì‹œì‘")
```

## 5. ì»¨í…ìŠ¤íŠ¸ ì°¸ì¡°
ì‘ì—… ìˆ˜í–‰ ì „ ë°˜ë“œì‹œ `docs/` í´ë” ë‚´ì˜ ë¬¸ì„œë“¤ì„ ì½ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ê³¼ ë³´ì•ˆ ì •ì±…ì„ ì¤€ìˆ˜í•˜ì‹­ì‹œì˜¤.

### í•„ìˆ˜ ì°¸ì¡° ë¬¸ì„œ
- **ê°œë°œ ì •ì±…**: `docs/00_DEVELOPMENT_POLICY.md`
- **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ**: `docs/DATABASE_SCHEMA.md` - ëª¨ë“  DB ê´€ë ¨ ì‘ì—… ì‹œ ë°˜ë“œì‹œ ì°¸ì¡°

## 6. í”„ë¡œì íŠ¸ íŠ¹í™” ê·œì¹™

### ì›¹ í¬ë¡¤ë§
- User-Agent ì„¤ì • í•„ìˆ˜
- ìš”ì²­ ê°„ ìµœì†Œ 2ì´ˆ ëŒ€ê¸° (CRAWL_DELAY)
- Robots.txt ì²´í¬
- ìµœëŒ€ ì¬ì‹œë„ 3íšŒ
- íƒ€ì„ì•„ì›ƒ 30ì´ˆ

### ë°ì´í„°ë² ì´ìŠ¤
- SQLAlchemy ORM ì‚¬ìš©
- íŠ¸ëœì­ì…˜ ê´€ë¦¬ ì² ì €
- ì¤‘ë³µ ë°ì´í„° ì²´í¬
- audit_logs í…Œì´ë¸”ì— ëª¨ë“  ì‘ì—… ê¸°ë¡

### íŒŒì„œ êµ¬í˜„
- ê° íŒŒì„œëŠ” ë…ë¦½ì ì¸ ëª¨ë“ˆë¡œ ì‘ì„±
- íŒŒì‹± ì‹¤íŒ¨ ì‹œ None ë°˜í™˜ (ì˜ˆì™¸ ë°œìƒ ê¸ˆì§€)
- ë°ì´í„° ê²€ì¦ ë¡œì§ í¬í•¨

## 7. í…ŒìŠ¤íŠ¸ ì‘ì„±
```python
# ì¢‹ì€ ì˜ˆ
def test_parse_email():
    """ì´ë©”ì¼ íŒŒì‹± í…ŒìŠ¤íŠ¸"""
    html = '<a href="mailto:test@example.com">Contact</a>'
    result = ContactParser.parse_email(html)
    assert result == "test@example.com"
    
def test_parse_email_not_found():
    """ì´ë©”ì¼ì´ ì—†ì„ ë•Œ í…ŒìŠ¤íŠ¸"""
    html = '<div>No email here</div>'
    result = ContactParser.parse_email(html)
    assert result is None
```

## 8. ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹
```
[íƒ€ì…] ê°„ë‹¨í•œ ì œëª©

ìƒì„¸ ì„¤ëª…:
- ë³€ê²½ ì‚¬í•­ 1
- ë³€ê²½ ì‚¬í•­ 2

ê´€ë ¨ íŒŒì¼:
- src/crawlers/school_crawler.py
- src/database/models.py
```

íƒ€ì…: feat(ê¸°ëŠ¥), fix(ë²„ê·¸), docs(ë¬¸ì„œ), refactor(ë¦¬íŒ©í† ë§), test(í…ŒìŠ¤íŠ¸), chore(ê¸°íƒ€)
