<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Crawler Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
        .pulse-dot {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen" x-data="dashboard()" x-init="init()">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8">
            <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-3xl">üï∑Ô∏è</span>
                    <h1 class="text-2xl font-bold text-gray-900">College Crawler Monitor</h1>
                </div>
                <div class="flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center sm:gap-4">
                    <span class="text-sm text-gray-500" x-text="lastUpdate"></span>
                    <button @click="fetchData()" 
                            class="w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                        üîÑ ÏÉàÎ°úÍ≥†Ïπ®
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
        <!-- Loading State -->
        <div x-show="loading" x-cloak class="text-center py-12">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
            <p class="mt-4 text-gray-600">Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...</p>
        </div>

        <!-- Content -->
        <div x-show="!loading" x-cloak class="space-y-6">
            <!-- Status Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Container Status -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Ïª®ÌÖåÏù¥ÎÑà ÏÉÅÌÉú</p>
                            <p class="text-2xl font-bold mt-1" 
                               :class="status.container?.running ? 'text-green-600' : 'text-red-600'"
                               x-text="status.container?.running ? 'Running' : 'Stopped'">
                            </p>
                        </div>
                        <div class="text-4xl">
                            <span x-show="status.container?.running">‚úÖ</span>
                            <span x-show="!status.container?.running">‚ùå</span>
                        </div>
                    </div>
                    <div class="mt-4 text-sm text-gray-500">
                        <span x-show="status.container?.health" 
                              x-text="'Health: ' + status.container?.health">
                        </span>
                    </div>
                </div>

                <!-- Database Status -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§</p>
                            <p class="text-2xl font-bold mt-1 text-blue-600" 
                               x-text="status.database?.total_schools || 0">
                            </p>
                        </div>
                        <div class="text-4xl">üíæ</div>
                    </div>
                    <div class="mt-4 text-sm text-gray-500">
                        <span x-text="'Ïù¥Î©îÏùº: ' + (status.database?.schools_with_email || 0) + 'Í∞ú'"></span>
                    </div>
                </div>

                <!-- CPU Usage -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">CPU ÏÇ¨Ïö©Î•†</p>
                            <p class="text-2xl font-bold mt-1 text-purple-600" 
                               x-text="(status.resources?.cpu_percent || 0).toFixed(1) + '%'">
                            </p>
                        </div>
                        <div class="text-4xl">‚ö°</div>
                    </div>
                    <div class="mt-4">
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-purple-600 h-2 rounded-full transition-all" 
                                 :style="'width: ' + (status.resources?.cpu_percent || 0) + '%'">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Memory Usage -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Îüâ</p>
                            <p class="text-2xl font-bold mt-1 text-orange-600" 
                               x-text="(status.resources?.memory_usage_mb || 0).toFixed(0) + 'MB'">
                            </p>
                        </div>
                        <div class="text-4xl">üß†</div>
                    </div>
                    <div class="mt-4 text-sm text-gray-500">
                        <span x-text="'/ ' + (status.resources?.memory_limit_mb || 0).toFixed(0) + 'MB'"></span>
                        <span class="ml-2" x-text="'(' + (status.resources?.memory_percent || 0).toFixed(1) + '%)'"></span>
                    </div>
                </div>
            </div>

            <!-- Crawling Statistics -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-900">üìä ÌÅ¨Î°§ÎßÅ ÌÜµÍ≥Ñ</h2>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div>
                            <div class="text-center">
                                <p class="text-4xl font-bold text-green-600" 
                                   x-text="status.crawling?.success || 0">
                                </p>
                                <p class="text-sm text-gray-600 mt-2">ÏÑ±Í≥µ</p>
                            </div>
                        </div>
                        <div>
                            <div class="text-center">
                                <p class="text-4xl font-bold text-red-600" 
                                   x-text="status.crawling?.failed || 0">
                                </p>
                                <p class="text-sm text-gray-600 mt-2">Ïã§Ìå®</p>
                            </div>
                        </div>
                        <div>
                            <div class="text-center">
                                <p class="text-4xl font-bold text-yellow-600"
                                   x-text="status.crawling?.skipped || 0">
                                </p>
                                <p class="text-sm text-gray-600 mt-2">Í±¥ÎÑàÎúÄ</p>
                            </div>
                        </div>
                        <div>
                            <div class="text-center">
                                <p class="text-4xl font-bold text-blue-600" 
                                   x-text="(status.crawling?.success_rate || 0).toFixed(1) + '%'">
                                </p>
                                <p class="text-sm text-gray-600 mt-2">ÏÑ±Í≥µÎ•†</p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6">
                        <div class="w-full bg-gray-200 rounded-full h-4">
                            <div class="bg-gradient-to-r from-green-500 to-blue-500 h-4 rounded-full transition-all" 
                                 :style="'width: ' + (status.crawling?.coverage_rate || 0) + '%'">
                            </div>
                        </div>
                        <p class="text-center text-sm text-gray-600 mt-2">
                            ÌÅ¨Î°§ÎßÅ ÏôÑÎ£åÏú®(Ïª§Î≤ÑÎ¶¨ÏßÄ): <span class="font-semibold" x-text="(status.crawling?.coverage_rate || 0).toFixed(1) + '%'"></span>
                        </p>
                        <p class="text-center text-xs text-gray-500 mt-1">
                            Ïó∞ÎùΩÏ≤ò ÏôÑÎ£åÏú®(Ïù¥Î©îÏùº): <span class="font-semibold" x-text="(status.database?.contact_completion_rate || status.database?.completion_rate || 0).toFixed(1) + '%'"></span>
                        </p>
                        <p class="text-center text-xs text-gray-500 mt-2">
                            ÏµúÍ∑º ÏóÖÎç∞Ïù¥Ìä∏ ÌïôÍµê: <span class="font-semibold" x-text="status.crawling?.recently_updated || 0"></span>Í∞ú
                            <span class="mx-2">|</span>
                            ÎßàÏßÄÎßâ ÌÅ¨Î°§ÎßÅ: <span x-text="formatDate(status.crawling?.last_crawl)"></span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Scorecard Data Section -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-900">üìä College Scorecard Level 1 Îç∞Ïù¥ÌÑ∞ ÏàòÏßë ÌòÑÌô©</h2>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Graduation Rate -->
                        <div class="border rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-2">Ï°∏ÏóÖÎ•† (Graduation Rate)</p>
                            <p class="text-3xl font-bold text-blue-600" 
                               x-text="status.database?.schools_with_graduation_rate || 0">
                            </p>
                            <p class="text-xs text-gray-500 mt-2">
                                <span class="font-semibold"
                                      x-text="status.database && status.database.total_schools ? 
                                          ((status.database.schools_with_graduation_rate / status.database.total_schools * 100) || 0).toFixed(1) + '%' : 
                                          '0%'">
                                </span>
                                Ïª§Î≤ÑÎ¶¨ÏßÄ
                            </p>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-blue-600 h-2 rounded-full transition-all"
                                     :style="status.database && status.database.total_schools ? 
                                         'width: ' + ((status.database.schools_with_graduation_rate / status.database.total_schools * 100) || 0) + '%' : 
                                         'width: 0%'">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Average Salary -->
                        <div class="border rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-2">ÌèâÍ∑† Ïó∞Î¥â (Average Salary)</p>
                            <p class="text-3xl font-bold text-green-600" 
                               x-text="status.database?.schools_with_average_salary || 0">
                            </p>
                            <p class="text-xs text-gray-500 mt-2">
                                <span class="font-semibold"
                                      x-text="status.database && status.database.total_schools ? 
                                          ((status.database.schools_with_average_salary / status.database.total_schools * 100) || 0).toFixed(1) + '%' : 
                                          '0%'">
                                </span>
                                Ïª§Î≤ÑÎ¶¨ÏßÄ
                            </p>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-green-600 h-2 rounded-full transition-all"
                                     :style="status.database && status.database.total_schools ? 
                                         'width: ' + ((status.database.schools_with_average_salary / status.database.total_schools * 100) || 0) + '%' : 
                                         'width: 0%'">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Overall Scorecard Coverage -->
                        <div class="border rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-2">Ï†ÑÏ≤¥ Scorecard Ïª§Î≤ÑÎ¶¨ÏßÄ</p>
                            <p class="text-3xl font-bold text-purple-600" 
                               x-text="status.database?.scorecard_coverage_rate ? 
                                   status.database.scorecard_coverage_rate.toFixed(1) + '%' : 
                                   '0%'">
                            </p>
                            <p class="text-xs text-gray-500 mt-2">
                                Ï†ïÎüâ Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Î≥¥Í∞ï
                            </p>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-purple-600 h-2 rounded-full transition-all"
                                     :style="'width: ' + (status.database?.scorecard_coverage_rate || 0) + '%'">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 text-center text-xs text-gray-500">
                        <span>ÌïòÎÇò Ïù¥ÏÉÅÏùò Scorecard Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî ÌïôÍµê: </span>
                        <span class="font-semibold" x-text="status.database?.schools_with_any_scorecard || 0"></span>
                        <span> / </span>
                        <span x-text="status.database?.total_schools || 0"></span>
                    </div>
                </div>
            </div>

            <!-- Recent Schools -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                    <h2 class="text-xl font-semibold text-gray-900">üéì ÏµúÍ∑º ÏóÖÎç∞Ïù¥Ìä∏Îêú ÌïôÍµê</h2>
                    <div class="w-full sm:w-auto">
                        <div class="grid grid-cols-2 gap-3 sm:flex sm:flex-wrap sm:items-end sm:gap-3">
                            <div class="flex flex-col">
                                <label class="text-xs text-gray-600">Ï£º</label>
                                <select x-model="recentSchoolsState" @change="recentSchoolsPage=1; fetchRecentSchools(1)"
                                        class="rounded border border-gray-300 px-2 py-1.5 text-sm w-full sm:w-auto">
                                    <option value="">Ï†ÑÏ≤¥</option>
                                    <option value="CA">Ï∫òÎ¶¨Ìè¨ÎãàÏïÑ (CA)</option>
                                    <option value="TX">ÌÖçÏÇ¨Ïä§ (TX)</option>
                                </select>
                            </div>
                            <div class="flex flex-col">
                                <label class="text-xs text-gray-600">ÌïôÍµê ÌÉÄÏûÖ</label>
                                <select x-model="recentSchoolsType" @change="recentSchoolsPage=1; fetchRecentSchools(1)"
                                        class="rounded border border-gray-300 px-2 py-1.5 text-sm w-full sm:w-auto">
                                    <option value="">Ï†ÑÏ≤¥</option>
                                    <option value="community_college">Community College</option>
                                </select>
                            </div>
                            <div class="flex flex-col col-span-2 sm:col-span-1">
                                <label class="text-xs text-gray-600">Ïù¥Î¶Ñ Í≤ÄÏÉâ</label>
                                <input type="text" x-model="recentSchoolsQuery" placeholder="ÌïôÍµê Ïù¥Î¶Ñ Í≤ÄÏÉâ"
                                       @input="debounceSearch()"
                                       class="rounded border border-gray-300 px-2 py-1.5 text-sm w-full sm:w-56">
                            </div>
                            <div class="flex flex-col">
                                <label class="text-xs text-gray-600">ÌéòÏù¥ÏßÄÎãπ</label>
                                <select x-model="recentSchoolsPerPage" @change="recentSchoolsPage=1; fetchRecentSchools(1)"
                                        class="rounded border border-gray-300 px-2 py-1.5 text-sm w-full sm:w-auto">
                                    <option value="10">10Í∞ú</option>
                                    <option value="20">20Í∞ú</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile: Card List -->
                <div class="sm:hidden divide-y divide-gray-200">
                    <template x-for="school in recentSchools" :key="school.id">
                        <div class="p-4 hover:bg-gray-50 cursor-pointer" @click="openSchoolDetail(school.id)">
                            <div class="flex items-start justify-between gap-3">
                                <div class="min-w-0">
                                    <div class="font-medium text-gray-900 truncate" x-text="school.name"></div>
                                    <div class="text-xs text-gray-500 mt-1" x-text="(school.city || '-') + ', ' + (school.state || '-')"></div>
                                </div>
                                <div class="flex-shrink-0">
                                    <span class="px-2 py-1 rounded text-xs font-medium"
                                          :class="statusBadgeClass(school.crawl_status)"
                                          :title="school.crawl_message || ''"
                                          x-text="statusLabel(school.crawl_status)">
                                    </span>
                                </div>
                            </div>

                            <div class="mt-2 text-xs text-gray-500 break-all">
                                <a :href="school.website"
                                   target="_blank"
                                   rel="noopener noreferrer"
                                   class="text-blue-600 hover:underline"
                                   @click.stop>
                                    <span x-text="school.website"></span>
                                </a>
                            </div>

                            <div class="mt-2 space-y-1 text-sm">
                                <div x-show="school.international_email" class="text-blue-600 break-all">
                                    üìß <span x-text="school.international_email"></span>
                                </div>
                                <div x-show="school.international_phone" class="text-green-600 break-all">
                                    üìû <span x-text="school.international_phone"></span>
                                </div>
                                <div x-show="!school.international_email && !school.international_phone" class="text-gray-400 text-sm">
                                    Ïó∞ÎùΩÏ≤ò Ï†ïÎ≥¥ ÏóÜÏùå
                                </div>
                            </div>

                            <div class="mt-2 text-xs text-gray-500">
                                ÌÅ¨Î°§ÎßÅ ÏóÖÎç∞Ïù¥Ìä∏: <span x-text="formatDate(school.crawl_updated_at || school.updated_at)"></span>
                            </div>
                        </div>
                    </template>
                    <div x-show="recentSchools.length === 0" class="p-4 text-center text-sm text-gray-500">
                        ÌëúÏãúÌï† ÌïôÍµêÍ∞Ä ÏóÜÏäµÎãàÎã§.
                    </div>
                </div>

                <!-- Desktop/Tablet: Table -->
                <div class="hidden sm:block overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ÌïôÍµêÎ™Ö
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ÏúÑÏπò
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Ïó∞ÎùΩÏ≤ò
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ÌÅ¨Î°§ÎßÅ ÏÉÅÌÉú
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ÌÅ¨Î°§ÎßÅ ÏóÖÎç∞Ïù¥Ìä∏
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <template x-for="school in recentSchools" :key="school.id">
                                <tr class="hover:bg-gray-50 cursor-pointer" @click="openSchoolDetail(school.id)">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="font-medium text-gray-900" x-text="school.name"></div>
                                        <div class="text-sm text-gray-500">
                                            <a :href="school.website"
                                               target="_blank"
                                               rel="noopener noreferrer"
                                               class="hover:underline"
                                               @click.stop>
                                                <span x-text="school.website"></span>
                                            </a>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                        <span x-text="school.city + ', ' + school.state"></span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <div x-show="school.international_email" class="text-blue-600">
                                            üìß <span x-text="school.international_email"></span>
                                        </div>
                                        <div x-show="school.international_phone" class="text-green-600">
                                            üìû <span x-text="school.international_phone"></span>
                                        </div>
                                        <div x-show="!school.international_email && !school.international_phone" class="text-gray-400">
                                            Ï†ïÎ≥¥ ÏóÜÏùå
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <span class="px-2 py-1 rounded text-xs font-medium"
                                              :class="statusBadgeClass(school.crawl_status)"
                                              :title="school.crawl_message || ''"
                                              x-text="statusLabel(school.crawl_status)">
                                        </span>
                                        <div class="text-xs text-gray-500 mt-1 max-w-xs truncate"
                                             x-show="school.crawl_message"
                                             :title="school.crawl_message"
                                             x-text="school.crawl_message">
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <span x-text="formatDate(school.crawl_updated_at || school.updated_at)"></span>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
                <div class="px-6 py-3 border-t border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 bg-gray-50">
                    <p class="text-sm text-gray-600">
                        Ï¥ù <span class="font-semibold" x-text="recentSchoolsTotal"></span>Í∞ú Ï§ë
                        <span x-show="recentSchoolsTotal > 0" x-text="(recentSchoolsPage - 1) * recentSchoolsPerPage + 1"></span>
                        <span x-show="recentSchoolsTotal === 0">0</span>
                        ‚Äì
                        <span x-text="Math.min(recentSchoolsPage * recentSchoolsPerPage, recentSchoolsTotal)"></span> ÌëúÏãú
                    </p>
                    <div class="flex items-center gap-1 max-w-full overflow-x-auto py-1">
                        <button @click="fetchRecentSchools(recentSchoolsPage - 1)"
                                :disabled="recentSchoolsPage <= 1"
                                class="px-3 py-1 rounded border text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200">
                            Ïù¥Ï†Ñ
                        </button>
                        <template x-for="n in recentSchoolsPageNumbers" :key="n">
                            <button @click="fetchRecentSchools(n)"
                                    :class="n === recentSchoolsPage ? 'bg-blue-600 text-white' : 'hover:bg-gray-200'"
                                    class="w-8 h-8 rounded text-sm">
                                <span x-text="n"></span>
                            </button>
                        </template>
                        <button @click="fetchRecentSchools(recentSchoolsPage + 1)"
                                :disabled="recentSchoolsPage >= recentSchoolsTotalPages"
                                class="px-3 py-1 rounded border text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200">
                            Îã§Ïùå
                        </button>
                    </div>
                </div>
            </div>

            <!-- Failed Sites -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                    <h2 class="text-xl font-semibold text-gray-900">Í±¥ÎÑàÎúÄ ÏÇ¨Ïù¥Ìä∏ (SSL Í≤ÄÏ¶ù Ïò§Î•ò)</h2>
                    <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium"
                          x-text="'Ï¥ù ' + failedSites.length + 'Í∞ú'">
                    </span>
                </div>

                <!-- Mobile: Card List -->
                <div class="sm:hidden divide-y divide-gray-200">
                    <template x-for="site in failedSites" :key="site.website">
                        <div class="p-4 hover:bg-gray-50 cursor-pointer" @click="openFailedSiteDetail(site)">
                            <div class="flex items-start justify-between gap-3">
                                <div class="min-w-0">
                                    <div class="text-sm font-medium text-gray-900 truncate" x-text="site.name"></div>
                                    <div class="text-xs text-gray-500 mt-1">
                                        ÏµúÏ¥à Ïã§Ìå®: <span x-text="formatDate(site.first_failed_at)"></span>
                                        <span class="mx-1">|</span>
                                        Ïû¨ÏãúÎèÑ: <span x-text="site.retry_count || 0"></span>Ìöå
                                    </div>
                                </div>
                                <div class="flex-shrink-0">
                                    <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-xs font-medium"
                                          x-text="(site.retry_count || 0) + 'Ìöå'">
                                    </span>
                                </div>
                            </div>
                            <div class="mt-2 text-xs break-all">
                                <a :href="site.website" target="_blank" rel="noopener noreferrer"
                                   class="text-blue-600 hover:text-blue-800"
                                   @click.stop>
                                    <span x-text="site.website"></span>
                                </a>
                            </div>
                            <div class="mt-2 text-xs text-gray-600 break-words" x-text="site.error_message"></div>
                        </div>
                    </template>
                    <div x-show="failedSites.length === 0" class="p-4 text-center text-sm text-gray-500">
                        Ïã§Ìå®Ìïú ÏÇ¨Ïù¥Ìä∏Í∞Ä ÏóÜÏäµÎãàÎã§.
                    </div>
                </div>

                <!-- Desktop/Tablet: Table -->
                <div class="hidden sm:block overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ÌïôÍµêÎ™Ö
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ÏõπÏÇ¨Ïù¥Ìä∏
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ÏóêÎü¨ Î©îÏãúÏßÄ
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ÏµúÏ¥à Ïã§Ìå®
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Ïû¨ÏãúÎèÑ ÌöüÏàò
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <template x-for="site in failedSites" :key="site.website">
                                <tr class="hover:bg-gray-50 cursor-pointer" @click="openFailedSiteDetail(site)">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900" x-text="site.name"></div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <a :href="site.website" target="_blank" rel="noopener noreferrer"
                                           class="text-sm text-blue-600 hover:text-blue-800 break-all"
                                           @click.stop>
                                            <span x-text="site.website"></span>
                                        </a>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="text-xs text-gray-600 max-w-md truncate"
                                             :title="site.error_message"
                                             x-text="site.error_message">
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-500" x-text="formatDate(site.first_failed_at)"></div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-xs font-medium"
                                              x-text="(site.retry_count || 0) + 'Ìöå'">
                                        </span>
                                    </td>
                                </tr>
                            </template>
                            <tr x-show="failedSites.length === 0">
                                <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">
                                    Ïã§Ìå®Ìïú ÏÇ¨Ïù¥Ìä∏Í∞Ä ÏóÜÏäµÎãàÎã§.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="px-6 py-3 bg-gray-50 text-xs text-gray-600">
                    SSL Í≤ÄÏ¶ù Ïã§Ìå® ÏÇ¨Ïù¥Ìä∏Îäî Îã§Ïùå ÌÅ¨Î°§ÎßÅÏóêÏÑú ÏûêÎèôÏúºÎ°ú Í±¥ÎÑàÎúÅÎãàÎã§.
                </div>
            </div>

            <!-- Recent Logs -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                    <h2 class="text-xl font-semibold text-gray-900">üìù ÏµúÍ∑º Î°úÍ∑∏</h2>
                    <button @click="fetchLogs()" 
                            class="w-full sm:w-auto text-sm px-3 py-2 sm:py-1 bg-gray-100 hover:bg-gray-200 rounded transition">
                        ÏÉàÎ°úÍ≥†Ïπ®
                    </button>
                </div>
                <div class="p-6">
                    <div class="bg-gray-900 rounded-lg p-4 max-h-96 overflow-y-auto font-mono text-sm">
                        <template x-for="log in logs" :key="log.timestamp">
                            <div class="text-gray-300 py-1 hover:bg-gray-800 px-2 rounded">
                                <span class="text-gray-500" x-text="log.timestamp"></span>
                                <span class="ml-2" x-text="log.message"></span>
                            </div>
                        </template>
                        <div x-show="logs.length === 0" class="text-gray-500 text-center py-4">
                            Î°úÍ∑∏Í∞Ä ÏóÜÏäµÎãàÎã§.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- School Detail Modal -->
    <div x-show="showModal" x-cloak class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4">
        <div class="w-full max-w-4xl max-h-[85vh] overflow-y-auto bg-white rounded-lg shadow-xl">
            <div class="px-6 py-4 border-b border-gray-200 flex items-start justify-between">
                <div>
                    <h3 class="text-xl font-semibold text-gray-900" x-text="selectedSchool?.name || 'ÌïôÍµê ÏÉÅÏÑ∏ Ï†ïÎ≥¥'"></h3>
                    <p class="text-sm text-gray-500 mt-1" x-text="selectedSchool?.website || '-'"></p>
                </div>
                <button @click="closeSchoolDetail()"
                        class="text-gray-500 hover:text-gray-700 text-sm px-3 py-1 rounded bg-gray-100 hover:bg-gray-200 transition">
                    Îã´Í∏∞
                </button>
            </div>

            <div class="p-6 space-y-6">
                <div x-show="detailLoading" class="text-sm text-gray-600">ÏÉÅÏÑ∏ Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...</div>
                <div x-show="detailError" class="text-sm text-red-600" x-text="detailError"></div>

                <div x-show="selectedSchool && !detailLoading" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div class="bg-gray-50 rounded p-4">
                        <h4 class="font-semibold text-gray-900 mb-2">Í∏∞Î≥∏ Ï†ïÎ≥¥</h4>
                        <p><span class="text-gray-500">ÌÉÄÏûÖ:</span> <span x-text="selectedSchool?.type || '-'"></span></p>
                        <p><span class="text-gray-500">ÏúÑÏπò:</span> <span x-text="(selectedSchool?.city || '-') + ', ' + (selectedSchool?.state || '-')"></span></p>
                        <p><span class="text-gray-500">ÏóÖÎç∞Ïù¥Ìä∏:</span> <span x-text="formatDate(selectedSchool?.updated_at)"></span></p>
                    </div>
                    <div class="bg-gray-50 rounded p-4">
                        <h4 class="font-semibold text-gray-900 mb-2">Ïó∞ÎùΩÏ≤ò</h4>
                        <p><span class="text-gray-500">Ïù¥Î©îÏùº:</span> <span x-text="selectedSchool?.international_email || '-'"></span></p>
                        <p><span class="text-gray-500">Ï†ÑÌôî:</span> <span x-text="selectedSchool?.international_phone || '-'"></span></p>
                    </div>
                </div>

                <!-- Scorecard Data Badge -->
                <div x-show="selectedSchool && !detailLoading && (selectedSchool?.graduation_rate || selectedSchool?.average_salary)" 
                     class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h4 class="font-semibold text-blue-900 mb-3">
                        üìä Scorecard Level 1 Îç∞Ïù¥ÌÑ∞
                    </h4>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div x-show="selectedSchool?.graduation_rate" class="bg-white rounded p-3">
                            <p class="text-gray-600 mb-1">Ï°∏ÏóÖÎ•†</p>
                            <p class="text-2xl font-bold text-blue-600">
                                <span x-text="selectedSchool?.graduation_rate"></span>%
                            </p>
                        </div>
                        <div x-show="selectedSchool?.average_salary" class="bg-white rounded p-3">
                            <p class="text-gray-600 mb-1">ÌèâÍ∑† Ïó∞Î¥â</p>
                            <p class="text-2xl font-bold text-green-600">
                                $<span x-text="selectedSchool?.average_salary ? selectedSchool.average_salary.toLocaleString() : '-'"></span>
                            </p>
                        </div>
                        <div x-show="selectedSchool?.acceptance_rate" class="bg-white rounded p-3">
                            <p class="text-gray-600 mb-1">ÏûÖÌïôÎ•†</p>
                            <p class="text-2xl font-bold text-purple-600">
                                <span x-text="selectedSchool?.acceptance_rate"></span>%
                            </p>
                        </div>
                        <div x-show="selectedSchool?.employment_rate" class="bg-white rounded p-3">
                            <p class="text-gray-600 mb-1">Ï∑®ÏóÖÎ•†</p>
                            <p class="text-2xl font-bold text-orange-600">
                                <span x-text="selectedSchool?.employment_rate"></span>%
                            </p>
                        </div>
                    </div>
                </div>

                <div x-show="selectedSchool && !detailLoading" class="space-y-3">
                    <h4 class="font-semibold text-gray-900">ÏàòÏßë Îç∞Ïù¥ÌÑ∞</h4>
                    <div class="bg-gray-50 rounded p-4 text-sm">
                        <p class="text-gray-600 mb-2">ESL ÌîÑÎ°úÍ∑∏Îû®</p>
                        <pre class="whitespace-pre-wrap break-words text-xs text-gray-800" x-text="formatDetailValue(selectedSchool?.esl_program)"></pre>
                    </div>
                    <div class="bg-gray-50 rounded p-4 text-sm">
                        <p class="text-gray-600 mb-2">Ïú†ÌïôÏÉù ÏßÄÏõê</p>
                        <pre class="whitespace-pre-wrap break-words text-xs text-gray-800" x-text="formatDetailValue(selectedSchool?.international_support)"></pre>
                    </div>
                    <div class="bg-gray-50 rounded p-4 text-sm">
                        <p class="text-gray-600 mb-2">ÏãúÏÑ§ Ï†ïÎ≥¥</p>
                        <pre class="whitespace-pre-wrap break-words text-xs text-gray-800" x-text="formatDetailValue(selectedSchool?.facilities)"></pre>
                    </div>
                </div>

                <div x-show="!detailLoading">
                    <h4 class="font-semibold text-gray-900 mb-3">ÏµúÍ∑º ÌÅ¨Î°§ÎßÅ Ïù¥Î†•</h4>
                    <div class="space-y-2">
                        <template x-for="log in crawlHistory" :key="log.id">
                            <div class="border rounded p-3 text-sm">
                                <div class="flex items-center justify-between">
                                    <span class="px-2 py-1 rounded text-xs font-medium"
                                          :class="statusBadgeClass(log.status)"
                                          x-text="statusLabel(log.status)">
                                    </span>
                                    <span class="text-gray-500" x-text="formatDate(log.timestamp)"></span>
                                </div>
                                <p class="mt-2 text-gray-700" x-text="log.message || '-'"></p>
                            </div>
                        </template>
                        <div x-show="crawlHistory.length === 0" class="text-sm text-gray-500">
                            ÌÅ¨Î°§ÎßÅ Ïù¥Î†•Ïù¥ ÏóÜÏäµÎãàÎã§.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Failed Site Detail Modal -->
    <div x-show="showFailedSiteModal" x-cloak class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4">
        <div class="w-full max-w-3xl max-h-[85vh] overflow-y-auto bg-white rounded-lg shadow-xl">
            <div class="px-6 py-4 border-b border-gray-200 flex items-start justify-between">
                <div>
                    <h3 class="text-xl font-semibold text-gray-900" x-text="selectedFailedSite?.name || 'Ïã§Ìå® ÏÇ¨Ïù¥Ìä∏ ÏÉÅÏÑ∏'"></h3>
                    <p class="text-sm text-red-600 mt-1" x-text="selectedFailedSite?.website || '-'"></p>
                </div>
                <button @click="closeFailedSiteDetail()"
                        class="text-gray-500 hover:text-gray-700 text-sm px-3 py-1 rounded bg-gray-100 hover:bg-gray-200 transition">
                    Îã´Í∏∞
                </button>
            </div>

            <div class="p-6 space-y-4">
                <div x-show="failedDetailLoading" class="text-sm text-gray-600">Ïã§Ìå® Î°úÍ∑∏ Î°úÎî© Ï§ë...</div>
                <div x-show="failedDetailError" class="text-sm text-red-600" x-text="failedDetailError"></div>

                <div x-show="selectedFailedSite && !failedDetailLoading" class="space-y-4">
                    <div class="bg-red-50 rounded p-4">
                        <h4 class="font-semibold text-red-900 mb-2">ÏóêÎü¨ Ïú†Ìòï</h4>
                        <p class="text-sm text-red-800" x-text="selectedFailedSite?.error_type || '-'"></p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 rounded p-4">
                            <h4 class="font-semibold text-gray-900 mb-2">ÏµúÏ¥à Ïã§Ìå® ÏãúÍ∞Å</h4>
                            <p class="text-sm" x-text="formatDate(selectedFailedSite?.first_failed_at)"></p>
                        </div>
                        <div class="bg-gray-50 rounded p-4">
                            <h4 class="font-semibold text-gray-900 mb-2">ÎßàÏßÄÎßâ ÌôïÏù∏</h4>
                            <p class="text-sm" x-text="formatDate(selectedFailedSite?.last_checked_at)"></p>
                        </div>
                    </div>

                    <div class="bg-gray-50 rounded p-4">
                        <h4 class="font-semibold text-gray-900 mb-2">Ïû¨ÏãúÎèÑ ÌöüÏàò</h4>
                        <p class="text-2xl font-bold text-red-600" x-text="(selectedFailedSite?.retry_count || 0) + 'Ìöå'"></p>
                    </div>

                    <div class="bg-yellow-50 rounded p-4" x-show="selectedFailedSite?.note">
                        <h4 class="font-semibold text-yellow-900 mb-2">Ï∞∏Í≥† ÏÇ¨Ìï≠</h4>
                        <p class="text-sm text-yellow-800" x-text="selectedFailedSite?.note || '-'"></p>
                    </div>

                    <div>
                        <h4 class="font-semibold text-gray-900 mb-3">Ïã§Ìå® Î°úÍ∑∏ Ï†ÑÏ≤¥</h4>
                        <div class="space-y-2">
                            <template x-for="log in failedSiteLogs" :key="log.id + '_' + log.timestamp">
                                <div class="border rounded p-3 text-sm">
                                    <div class="flex items-center justify-between">
                                        <span class="px-2 py-1 rounded text-xs font-medium"
                                              :class="statusBadgeClass(log.status)"
                                              x-text="statusLabel(log.status)">
                                        </span>
                                        <span class="text-gray-500" x-text="formatDate(log.timestamp)"></span>
                                    </div>
                                    <pre class="mt-2 text-xs text-gray-700 whitespace-pre-wrap break-words" x-text="log.message || '-'"></pre>
                                </div>
                            </template>
                            <div x-show="failedSiteLogs.length === 0" class="text-sm text-gray-500">
                                Ïã§Ìå® Î°úÍ∑∏Í∞Ä ÏóÜÏäµÎãàÎã§.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="mt-12 pb-8 text-center text-sm text-gray-500">
        <p>College Crawler Monitor v1.0.0 | 
           <span x-show="autoRefresh" class="text-green-600">‚óè ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ® (30Ï¥à)</span>
           <span x-show="!autoRefresh" class="text-gray-400">‚óã ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ® Í∫ºÏßê</span>
        </p>
    </footer>

    <script>
        function dashboard() {
            return {
                status: {},
                recentSchools: [],
                recentSchoolsPage: 1,
                recentSchoolsTotal: 0,
                recentSchoolsTotalPages: 0,
                recentSchoolsPageNumbers: [],
                recentSchoolsPerPage: 20,
                recentSchoolsState: '',
                recentSchoolsType: '',
                recentSchoolsQuery: '',
                recentSchoolsSearchTimer: null,
                failedSites: [],
                logs: [],
                loading: true,
                lastUpdate: 'Î°úÎî© Ï§ë...',
                autoRefresh: true,
                refreshInterval: null,
                showModal: false,
                selectedSchool: null,
                crawlHistory: [],
                detailLoading: false,
                detailError: '',
                showFailedSiteModal: false,
                selectedFailedSite: null,
                failedSiteLogs: [],
                failedDetailLoading: false,
                failedDetailError: '',

                async init() {
                    await this.fetchData();
                    await this.fetchLogs();
                    await this.fetchRecentSchools(1);
                    await this.fetchFailedSites();
                    
                    // ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ® (30Ï¥àÎßàÎã§)
                    this.refreshInterval = setInterval(() => {
                        if (this.autoRefresh) {
                            this.fetchData();
                            this.fetchFailedSites();
                            this.fetchLogs();
                            this.fetchRecentSchools(this.recentSchoolsPage);
                        }
                    }, 30000);
                },

                debounceSearch() {
                    if (this.recentSchoolsSearchTimer) clearTimeout(this.recentSchoolsSearchTimer);
                    this.recentSchoolsSearchTimer = setTimeout(() => {
                        this.recentSchoolsPage = 1;
                        this.fetchRecentSchools(1);
                    }, 300);
                },

                async fetchData() {
                    try {
                        const response = await fetch('./api/status');
                        this.status = await response.json();
                        this.lastUpdate = new Date().toLocaleString('ko-KR');
                        this.loading = false;
                    } catch (error) {
                        console.error('Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ïã§Ìå®:', error);
                        this.loading = false;
                    }
                },

                async fetchRecentSchools(page) {
                    const p = page ?? this.recentSchoolsPage;
                    try {
                        const params = new URLSearchParams();
                        params.set('page', String(p));
                        params.set('per_page', String(this.recentSchoolsPerPage));
                        if (this.recentSchoolsState) params.set('state', this.recentSchoolsState);
                        if (this.recentSchoolsType) params.set('school_type', this.recentSchoolsType);
                        if (this.recentSchoolsQuery && this.recentSchoolsQuery.trim()) params.set('q', this.recentSchoolsQuery.trim());
                        const response = await fetch('./api/schools/recent?' + params.toString());
                        const data = await response.json();
                        this.recentSchools = data.items || [];
                        this.recentSchoolsTotal = data.total ?? 0;
                        this.recentSchoolsPage = data.page ?? 1;
                        this.recentSchoolsTotalPages = data.total_pages ?? 0;
                        this.recentSchoolsPageNumbers = Array.from({ length: this.recentSchoolsTotalPages }, (_, i) => i + 1);
                    } catch (error) {
                        console.error('ÌïôÍµê Î™©Î°ù Î°úÎî© Ïã§Ìå®:', error);
                    }
                },

                async fetchLogs() {
                    try {
                        const response = await fetch('./api/logs/recent?lines=50');
                        const data = await response.json();
                        this.logs = data.logs || [];
                    } catch (error) {
                        console.error('Î°úÍ∑∏ Î°úÎî© Ïã§Ìå®:', error);
                    }
                },

                async fetchFailedSites() {
                    try {
                        const response = await fetch('./api/failed-sites');
                        const data = await response.json();
                        this.failedSites = data.ssl_failures || [];
                    } catch (error) {
                        console.error('Ïã§Ìå® ÏÇ¨Ïù¥Ìä∏ Î°úÎî© Ïã§Ìå®:', error);
                        this.failedSites = [];
                    }
                },

                async openSchoolDetail(schoolId) {
                    this.showModal = true;
                    this.detailLoading = true;
                    this.detailError = '';
                    this.selectedSchool = null;
                    this.crawlHistory = [];
                    try {
                        const response = await fetch(`./api/schools/${schoolId}`);
                        if (!response.ok) {
                            throw new Error(`ÏÉÅÏÑ∏ API Ìò∏Ï∂ú Ïã§Ìå® (${response.status})`);
                        }
                        const data = await response.json();
                        this.selectedSchool = data.school || null;
                        this.crawlHistory = data.crawl_history || [];
                    } catch (error) {
                        console.error('ÌïôÍµê ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Î°úÎî© Ïã§Ìå®:', error);
                        this.detailError = 'ÌïôÍµê ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§ÏßÄ Î™ªÌñàÏäµÎãàÎã§.';
                    } finally {
                        this.detailLoading = false;
                    }
                },

                closeSchoolDetail() {
                    this.showModal = false;
                    this.detailError = '';
                },

                async openFailedSiteDetail(site) {
                    this.showFailedSiteModal = true;
                    this.selectedFailedSite = site || null;
                    this.failedSiteLogs = [];
                    this.failedDetailError = '';
                    this.failedDetailLoading = true;
                    try {
                        const response = await fetch(`./api/failed-sites/detail?website=${encodeURIComponent(site.website || '')}`);
                        if (!response.ok) {
                            throw new Error(`Ïã§Ìå® ÏÉÅÏÑ∏ API Ìò∏Ï∂ú Ïã§Ìå® (${response.status})`);
                        }
                        const data = await response.json();
                        this.selectedFailedSite = data.site || site;
                        this.failedSiteLogs = data.logs || [];
                    } catch (error) {
                        console.error('Ïã§Ìå® ÏÇ¨Ïù¥Ìä∏ ÏÉÅÏÑ∏ Î°úÎî© Ïã§Ìå®:', error);
                        this.failedDetailError = 'Ïã§Ìå® ÏÉÅÏÑ∏ Î°úÍ∑∏Î•º Î∂àÎü¨Ïò§ÏßÄ Î™ªÌñàÏäµÎãàÎã§.';
                        this.failedSiteLogs = [];
                    } finally {
                        this.failedDetailLoading = false;
                    }
                },

                closeFailedSiteDetail() {
                    this.showFailedSiteModal = false;
                    this.selectedFailedSite = null;
                    this.failedSiteLogs = [];
                    this.failedDetailError = '';
                },

                statusLabel(status) {
                    if (status === 'success') return 'ÏÑ±Í≥µ';
                    if (status === 'failed') return 'Ïã§Ìå®';
                    if (status === 'skipped') return 'Í±¥ÎÑàÎúÄ';
                    return 'ÎØ∏ÌôïÏù∏';
                },

                statusBadgeClass(status) {
                    if (status === 'success') return 'bg-green-100 text-green-800';
                    if (status === 'failed') return 'bg-red-100 text-red-800';
                    if (status === 'skipped') return 'bg-gray-100 text-gray-800';
                    return 'bg-yellow-100 text-yellow-800';
                },

                formatDetailValue(value) {
                    if (value === null || value === undefined || value === '') {
                        return '-';
                    }
                    if (typeof value === 'object') {
                        try {
                            return JSON.stringify(value, null, 2);
                        } catch (error) {
                            return String(value);
                        }
                    }
                    return String(value);
                },

                formatDate(dateString) {
                    if (!dateString) return '-';
                    const date = new Date(dateString);
                    return date.toLocaleString('ko-KR', {
                        month: 'short',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                }
            }
        }
    </script>
</body>
</html>
